--- originals/evilportal.orig	2026-01-18 23:10:24.603418346 -0700
+++ evilportal_dev	2026-01-18 23:19:20.207028483 -0700
@@ -2,6 +2,10 @@
 
 START=99
 
+# Add extra commands
+EXTRA_COMMANDS="switch"
+EXTRA_HELP="switch <portal>    Switch active Evil Portal"
+
 # Helper function to add temporary nft rules directly to dstnat chain
 # (dstnat always exists, dstnat_lan only exists when UCI rules are present)
 add_nft_rules() {
@@ -63,11 +67,12 @@
     dnsmasq --no-hosts --no-resolv --address=/#/10.0.0.1 -p 5353 &
     rm -f /www/captiveportal
     ln -s /pineapple/ui/modules/evilportal/assets/api /www/captiveportal
-    ln -sf /root/portals/Default/index.php /www/index.php
-    ln -sf /root/portals/Default/MyPortal.php /www/MyPortal.php
-    ln -sf /root/portals/Default/helper.php /www/helper.php
-	ln -sf /root/portals/Default/generate_204.html /www/generate_204
-    ln -sf /root/portals/Default/hotspot-detect.html /www/hotspot-detect.html
+    ln -sf /root/portals/current/index.php /www/index.php
+    ln -sf /root/portals/current/assets /www/assets
+    ln -sf /root/portals/current/MyPortal.php /www/MyPortal.php
+    ln -sf /root/portals/current/helper.php /www/helper.php
+	ln -sf /root/portals/current/generate_204.html /www/generate_204
+    ln -sf /root/portals/current/hotspot-detect.html /www/hotspot-detect.html
 
     # Start whitelist daemon
     /usr/bin/evilportal-whitelist-daemon &
@@ -86,6 +91,45 @@
     remove_whitelist_rules
 }
 
+# Helper function to switch portals 
+switch() {
+    NEW_PORTAL="$1"
+    PORTAL_BASE="/root/portals"
+    CURRENT_LINK="$PORTAL_BASE/current"
+
+    if [ -z "$NEW_PORTAL" ]; then
+        echo "Usage: /etc/init.d/evilportal switch <portal_name>"
+        logger -t evilportal "Switch failed: no portal specified"
+        return 1
+    fi
+
+    if [ ! -d "$PORTAL_BASE/$NEW_PORTAL" ]; then
+        echo "Portal does not exist: $NEW_PORTAL"
+        logger -t evilportal "Switch failed: portal not found ($NEW_PORTAL)"
+        return 1
+    fi
+
+    # Remove current symlink
+    rm -rf "$CURRENT_LINK"
+    # Update symlink atomically
+    ln -sfn "$PORTAL_BASE/$NEW_PORTAL" "$PORTAL_BASE/current"
+    if [ $? -ne 0 ]; then
+        echo "Failed to update portal symlink"
+        logger -t evilportal "Switch failed: symlink update error"
+        return 1
+    fi
+
+    # If Evil Portal is currently running, restart services
+    if pidof nginx >/dev/null 2>&1; then
+        restart
+    fi
+
+    echo "Portal switched to $NEW_PORTAL"
+    logger -t evilportal "Portal switched to $NEW_PORTAL"
+
+    return 0
+}
+
 start() {
     # Add TEMPORARY nft rules (disappear on reboot)
     add_nft_rules
@@ -199,3 +243,4 @@
 
     logger -t evilportal "Evil Portal disabled (will not start on next reboot)"
 }
+
